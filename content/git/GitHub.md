---
title: github
layout: default
---


بعد از تغییر نام:  
❌ push / pull خطا می‌ده  
✔️ باید خودت اصلاحش کنی:

`git remote set-url origin https://github.com/newname/project.git`

---

---

## 0) قانون طلایی قبل از کارهای خطرناک

هر وقت خواستی **حذف/بازنویسی تاریخچه** انجام بدی، اول یک برنچ نجات بساز:

```bash
git branch backup-$(date +%Y%m%d-%H%M)
```

این یعنی اگر خراب شد، همیشه یک راه برگشت داری.

---

## 1) دیدن لیست کامیت‌ها (کامل و مرتب)

### لیست ساده و خوانا (پیشنهاد من)

```bash
git log --oneline --decorate --graph --all
```

نمونه خروجی (فرضی):

```
* 9f3a1c2 (HEAD -> main, origin/main) Update resume section
* 1ab22d0 Add article about WebDAV
* 7c0d9a1 Add CSS styling
* 4e11b08 Initial site structure
```

### دیدن فقط 20 کامیت آخر

```bash
git log -n 20 --oneline
```

---

## 2) دیدن اینکه هر کامیت دقیقاً چه تغییراتی داشته

### 2.1) دیدن تغییرات یک کامیت (پچ کامل)

```bash
git show 1ab22d0
```

### 2.2) فقط لیست فایل‌های تغییر کرده در یک کامیت

```bash
git show --name-only 1ab22d0
```

### 2.3) فقط خلاصه (چند خط) از تغییرات

```bash
git show --stat 1ab22d0
```

### 2.4) دیدن اختلاف بین دو کامیت (بازه)

مثلاً ببین بین `4e11b08` تا `9f3a1c2` چی تغییر کرده:

```bash
git diff 4e11b08..9f3a1c2
```

---

## 3) رفتن به یک کامیت قدیمی (بدون از دست دادن چیزی)

### رفتن به کامیت قدیمی (حالت Detached HEAD)

```bash
git checkout 7c0d9a1
```

یا (جدیدتر):

```bash
git switch --detach 7c0d9a1
```

✅ اینجا “فقط رفتی گذشته رو دیدی”.  
❗ ولی هنوز روی برنچ نیستی (Detached). اگر اینجا کامیت بزنی، ممکنه بعداً گم بشه.

### 3.1) ساختن برنچ از همون کامیت (راه درست)

وقتی رفتی روی اون کامیت و خواستی از همون‌جا ادامه بدی:

```bash
git switch -c fix-from-old
```

الان هر چی کامیت کنی روی `fix-from-old` ذخیره می‌شه.

---

## 4) “رفتم پایین‌تر، حالا چطور برگردم بالاتر؟”

### 4.1) برگشت به برنچ اصلی (مثلاً main)

```bash
git switch main
```

این تو رو برمی‌گردونه به نوک برنچ main (همون بالاترها).

### 4.2) اگر نام برنچ قبلی رو یادت نیست (سوئیچ سریع)

```bash
git switch -
```

این بین دو وضعیت آخر جابه‌جات می‌کنه (خیلی کاربردیه).

### 4.3) اگر کامیت/جایی رو گم کردی: reflog (نجات‌دهنده)

این مهم‌ترین دستور برای “برگردوندن چیزایی که فکر می‌کنی گم شدن”:

```bash
git reflog
```

نمونه:

```
9f3a1c2 HEAD@{0}: checkout: moving from 7c0d9a1 to main
7c0d9a1 HEAD@{1}: checkout: moving from main to 7c0d9a1
```

هر جا خواستی برگردی:

```bash
git checkout HEAD@{1}
```

---

## 5) حذف چند کامیت با هم (دو حالت مهم)

اینجا باید فرق این دو رو دقیق بفهمی:

### حالت A) کامیت‌ها را “حذف کن ولی تاریخچه خراب نشه” (ایمن، مخصوصاً اگر push کردی)

✅ بهترین روش: `revert` (کامیت معکوس می‌سازه)

مثلاً می‌خوای 2 کامیت آخر رو برگردونی:

```bash
git revert HEAD
git revert HEAD
```

یا بازه:

```bash
git revert 7c0d9a1..9f3a1c2
```

📌 این تاریخچه رو پاک نمی‌کنه؛ فقط اثرش رو برمی‌گردونه. مناسب وقتی که روی GitHub push کردی.

---

### حالت B) کامیت‌ها را “واقعاً از تاریخچه حذف کن” (بازنویسی تاریخچه)

اینجا ابزار اصلی: **interactive rebase**

فرض کن تاریخچه اینه:

```
9f3a1c2  (می‌خوای حذفش کنی)
1ab22d0  (می‌خوای حذفش کنی)
7c0d9a1
4e11b08
```

می‌خوای دو کامیت آخر (`9f3a1c2` و `1ab22d0`) کلاً حذف بشن:

```bash
git rebase -i HEAD~2
```

یه ادیتور باز می‌شه مثل:

```
pick 1ab22d0 Add article about WebDAV
pick 9f3a1c2 Update resume section
```

برای حذف، `pick` رو تبدیل کن به `drop` (یا خط رو پاک کن):

```
drop 1ab22d0 Add article about WebDAV
drop 9f3a1c2 Update resume section
```

ذخیره کن و ببند. تموم.

❗ اگر این برنچ قبلاً push شده باشد، برای اعمال روی GitHub باید:

```bash
git push --force-with-lease
```

(این کار روی پروژه‌های تیمی خطرناکه، ولی برای سایت شخصی خودت معمولاً مشکلی نداره.)

---

## 6) حذف “یک بازه” از کامیت‌ها (مثال واقعی)

فرض کن می‌خوای کامیت‌های بین `A` و `D` رو حذف کنی:

```
D  9f3a1c2   ← می‌خوای حذف
C  1ab22d0   ← می‌خوای حذف
B  7c0d9a1   ← می‌خوای حذف
A  4e11b08   ← این رو نگه می‌داری
```

یعنی فقط می‌خوای بعد از A، مستقیم برسی به قبل از B (همه‌ی B,C,D حذف).

پس باید از “کامیت قبل از بازه” rebase کنی:

```bash
git rebase -i 4e11b08
```

ادیتور لیست کامیت‌های بعد از `4e11b08` رو می‌دهد. هر کدوم رو که می‌خوای حذف کنی `drop` کن.

---

## 7) رفتن روی یک برنچ دیگه و بعد برگشتن و اینکه کامیت‌ها “سر جاشون” بمونن

### 7.1) دیدن برنچ‌ها

```bash
git branch -vv
```

### 7.2) رفتن به برنچ دیگر

```bash
git switch draft
```

### 7.3) برگشت به برنچ قبلی

```bash
git switch -
```

✅ کامیت‌های هر برنچ سر جاشون می‌مونن؛ چون هر برنچ تاریخچه خودش رو دارد.

---

## 8) من روی یک برنچ کامیت کردم، حالا می‌خوام همون کامیت‌ها رو بیارم روی main

دو راه رایج:

### 8.1) merge (همه چیز باهم)

```bash
git switch main
git merge draft
```

### 8.2) cherry-pick (فقط چند کامیت خاص)

مثلاً فقط این دو کامیت رو می‌خوای:

```bash
git switch main
git cherry-pick 1ab22d0 9f3a1c2
```

---

## 9) “از یک کامیت جدیدتر دوباره برگردم به یک کامیت قدیمی و بعد دوباره بیام جلو”

این همون مشکلیه که گفتی “دیگه بالاترا رو نشون نمیده”.  
راه درست:

- اگر فقط خواستی **نگاه کنی**:
    
    - برو با `checkout` یا `switch --detach`
        
    - بعد برگرد `git switch main`
        
- اگر خواستی **واقعاً تاریخچه رو جلو/عقب کنی**:
    
    - از `reflog` استفاده کن
        

مثال:

```bash
git reflog
# بعد
git checkout HEAD@{0}
```

---

# نسخه خیلی خلاصه (برای حفظ کردن)

- دیدن کامیت‌ها:  
    `git log --oneline --graph --all`
    
- دیدن تغییرات یک کامیت:  
    `git show <hash>`
    
- رفتن به یک کامیت و ساخت برنچ از آن:  
    `git switch --detach <hash>`  
    `git switch -c new-branch`
    
- برگشت به آخرین وضعیت برنچ:  
    `git switch main`
    
- نجات وقتی گم شدی:  
    `git reflog`
    
- حذف واقعی چند کامیت:  
    `git rebase -i ...` و `drop`
    
- برگرداندن بدون خراب کردن تاریخچه:  
    `git revert ...`
    

---

اگر یک خروجی واقعی از `git log --oneline --decorate --graph --all` پروژه‌ات را همینجا paste کنی، من دقیقاً **با هش‌های واقعی خودت** می‌گم:

- کدام کامیت‌ها را drop کنی
    
- دستور دقیق rebase از کجا باشد
    
- و اگر push کردی، آیا `revert` بهتر است یا `rebase` + `force-with-lease`
