---
permalink: /assets/search_index.json
---

{%- comment -%}
  =========================
  Search/Navigation Index (generated at build-time)
  - Works on GitHub Pages + local jekyll serve
  =========================
{%- endcomment -%}

{
  "generated": {{ site.time | date_to_xmlschema | jsonify }},
  "pages": [
    {%- assign pages = site.pages | where_exp:"p","p.url != '/assets/search_index.json'" -%}
    {%- for p in pages -%}
      {%- assign in_content_prefix = p.path | slice: 0, 8 -%}
      {%- if in_content_prefix == 'content/' -%}
        {%- assign inContentBool = true -%}
      {%- else -%}
        {%- assign inContentBool = false -%}
      {%- endif -%}

      {%- assign excluded = p.exclude_from_nav -%}
      {%- if excluded != true -%}
      {
        "type": "page",
        "title": {{ p.title | default: p.name | jsonify }},
        "url": {{ p.url | jsonify }},
        "path": {{ p.path | jsonify }},
        "inContent": {{ inContentBool | jsonify }}
      }{%- unless forloop.last -%},{%- endunless -%}
      {%- endif -%}
    {%- endfor -%}
  ],
  "files": [
    {%- assign files = site.static_files | where_exp:"f","f.path contains '/content/'" -%}
    {%- for f in files -%}
      {
        "type": "file",
        "name": {{ f.name | jsonify }},
        "url": {{ f.path | jsonify }},
        "path": {{ f.path | jsonify }}
      }{%- unless forloop.last -%},{%- endunless -%}
    {%- endfor -%}
  ]
}
